<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>プログラミング基礎 I: データの入力と出力</title>
  <meta name="generator" content="amaya 9.0, see http://www.w3.org/Amaya/" />
  <link href="../../stylesheets/slide-screen.css" rel="stylesheet"
  type="text/css" media="screen" />
  <link href="../../stylesheets/slide-proj.css" rel="stylesheet"
  type="text/css" media="projection" />
  <link href="../../stylesheets/slide-print.css" rel="stylesheet"
  type="text/css" media="print" />
  <style type="text/css">
  </style>
</head>

<body>
<h1 style="text-align: center">プログラミング基礎 I</h1>

<h2 style="text-align: center">第七回 (2005年 5月 30日):
データの入力と出力</h2>

<p class="letterhead"><a href="http://www.aoyama.ac.jp/"><img alt="AGU"
src="../../stylesheets/aoyamalogo.jpg" /></a></p>

<p class="signature">© 2005 <a href="mailto:duerst@it.aoyama.ac.jp">Martin
J. Dürst</a> <a href="http://www.aoyama.ac.jp/">青山学院大学</a></p>

<h1>データ入力と出力の選択肢</h1>
<ul>
  <li>入力:
    <ul>
      <li>プログラムへの引数 (コマンドラインで)</li>
      <li>標準入力
        (キーボードから、もしくはかファイルの流し込み)</li>
      <li>任意のファイルから</li>
    </ul>
  </li>
  <li>出力:
    <ul>
      <li>標準出力
        (画面へ、もしくはファイルへの流し込み)</li>
      <li>任意のファイルへ</li>
    </ul>
  </li>
</ul>

<h1>プログラムへの引数</h1>

<p>使い方:
プログラムを呼び出すときにプログラムの後に書く<br />
例: <code>C:\perl&gt;bmi.pl 75 1.8</code></p>

<p>作り方: 引数を順番に <code>shift()</code> で取り寄せる</p>

<p>仕組みの説明:</p>
<ul>
  <li>Perl は引数を決った配列 <code>@ARGV</code> に代入</li>
  <li><code>$ARGV[0]</code>, <code>$ARGV[1]</code>
    等でも引数は参照可能</li>
  <li>リスト代入も使える。例: <code>($weight, $height) =
    @ARGV;</code></li>
  <li><code>shift @ARGV</code>
    で配列の先頭から配列の要素を取り出せる</li>
  <li><code>shift @ARGV</code> は <code>shift</code> (もしくは
    <code>shift()</code>) に省略可能</li>
</ul>

<h1>標準入力</h1>
<ul>
  <li>キーボードから、もしくはファイルからの流し込み
    (リダイレクト)</li>
  <li>リダイレクトの使い方:
    <code>&lt;入力ファイル名</code><br />
    例: <code>C:\perl&gt;bmi.pl &lt;bmidata.txt</code></li>
  <li>作り方 (プログラムもファイルも同様):
    <ul>
      <li>一行ごと: <code>$line = &lt;STDIN&gt;;</code></li>
      <li>(ファイル) 全体: <code>@lines = &lt;STDIN&gt;;</code></li>
    </ul>
  </li>
</ul>

<h1>標準入力の定石</h1>
<ul>
  <li>while 文で行ごとに入力を読み込む</li>
  <li>&lt;STDIN&gt; は &lt;&gt; に省略できる</li>
  <li>入力を代入などに使わないと「暗黙の了解」の変数
    (<code>$_</code>) に代入される</li>
  <li>いくつかの命令は指定がない場合に「暗黙の了解」の変数を使う</li>
  <li><code>while (&lt;&gt;)</code>
    では入力が終わるまで読み続ける</li>
  <li>例 (入力をそのまま出力):<br />

    <pre>while (&lt;&gt;) {
    print;
}</pre>
  </li>
</ul>

<h1><code>join</code> の反対 <code>split</code></h1>
<ul>
  <li>複数の物を同じ行で読み込んだら分ける必要がある</li>
  <li>区切りの文字 (列) を指定する</li>
  <li>例:<br />

    <pre>while (&lt;&gt;) {
    ($name, $weight, $height) = split " ";
    print "$name, $weight, $height\n";
}</pre>
  </li>
</ul>

<h1>標準出力</h1>
<ul>
  <li>print
    等で出力されるデータを画面だけでなくて、ファイルにも出力ができる</li>
  <li>出力のリダイレクトの使い方:
    <code>&gt;出力ファイ</code><br />
    例: <code>Z:\perl&gt;bmi.pl &gt;bmiresult.txt</code><br />
    例: <code>Z:\perl&gt;bmi.pl &lt;bmidata.txt &gt;bmiresult.txt</code></li>
</ul>

<h1>簡単な演習・宿題</h1>
<ul>
  <li>スペースを区切りに使う入力ファイルをコンマを使うファイルに変換するプログラムを作る</li>
  <li>以前作った BMI
    やガス請求のプログラムを、大量処理に対応するように変換:
    <ul>
      <li>入力はファイルから</li>
      <li>ファイルは行ごとデータがある (例えば BMI
        の場合は身長、体重など)</li>
    </ul>
  </li>
  <li>もっと色々な区切りの変換を行うプログラムを作る</li>
  <li>自分の周りに文書・データの変換
    (文字の置き換えなど) の問題を見つける</li>
</ul>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>プログラミング基礎 I: 初めての Perl</title>
  <meta name="generator" content="amaya 9.0, see http://www.w3.org/Amaya/" />
  <link href="../../stylesheets/bert-proj.css" rel="stylesheet"
  type="text/css" media="projection" />
  <link href="../../stylesheets/bert-print.css" rel="stylesheet"
  type="text/css" media="print" />
  <style type="text/css">
  </style>
</head>

<body>
<h1 style="text-align: center">プログラミング基礎 I</h1>

<h2 style="text-align: center">第三回 (2005/4/25):
演算子、変数と代入</h2>

<p class="letterhead"><a href="http://www.aoyama.ac.jp/"><img alt="AGU"
src="../../stylesheets/aoyamalogo.jpg" /></a></p>

<p class="signature">© 2005 <a href="mailto:duerst@it.aoyama.ac.jp">Martin
J. Dürst</a> <a href="http://www.aoyama.ac.jp/">青山学院大学</a></p>

<h1>演習問題・宿題</h1>
<ol>
  <li>華氏から摂氏への変換を行うプログラムを作る
    <p>c = (f-32) · 5/9</p>
    <pre># Celsius -&gt; Fahrenheit
print "degrees Fahrenheit is: ";
print ((shift() - 32) * 5 / 9);
print "\n";</pre>
  </li>
  <li>[任意]
    ケルビンの温度の単位もある。摂氏や華氏とケルビンの変換のプログラムを作る</li>
  <li>[任意]
  他の簡単な計算を考えて、プログラムを作る</li>
</ol>

<h1>宿題の回答の問題点: 括弧</h1>

<p>問題のある例:</p>
<ol>
  <li><code><span style="color: #D20000; background-color: #FFFFFF">print
    (shift() - 32) * 5 / 9;</span></code></li>
  <li><code><span style="color: #D20000; background-color: #FFFFFF">print
    ((shift()-32) * 5/9), "degrees Fahrenheit";</span></code></li>
  <li><code><span style="color: #D20000; background-color: #FFFFFF">print
    (2+3) * 4; # prints 5</span></code></li>
</ol>

<p>動詞 (命令)
に続いて括弧が来るとその括弧が動詞のすべての目的詞を囲むと見なされる。</p>

<p>大体の動詞には結果があるので、Perl
は問題にしない。</p>

<p><code>print "\tone more: ", print (2+3) * 4, "\n";</code></p>

<h1>括弧の問題の解決策</h1>
<ul>
  <li>プログラムを念入りにチェック</li>
  <li>結果のチェック (プログラムのテースト)</li>
  <li><code>perl -w</code> で警告を出す:
    <pre>perl -w -e "print (2+3)*4;"</pre>
  </li>
  <li>警告がでてもプログラムは動く</li>
  <li>警告の少ないプログラムがいい</li>
</ul>

<h1>今までのプログラムの不満点</h1>
<ul>
  <li>入力が計算に使われて、出力には使えない
    <p>例えば次の出力はどうするか:</p>
    <p>10 degrees Celsius is 50 degrees Fahrenheit</p>
  </li>
  <li>入力、計算、そして出力が入れ込んでいる
    <p>(小さいプログラムでは読みにくい、大きくなるほど問題になる)</p>
  </li>
  <li>解決策: 変数を使う</li>
</ul>

<h1>変数とは</h1>
<ul>
  <li>名前が付いている箱である</li>
  <li>箱に値 (データ) を入れられる (代入できる)</li>
  <li>変数の値は計算などに使える</li>
  <li>値を代入すると前にあった値が消える</li>
  <li>値を計算など (代入を含めて) 使うと値が残る</li>
</ul>

<h1>Perl の単数名詞: スカラ変数</h1>
<ul>
  <li>名前は $
    で始まって、その後ローマ字があって、その後ローマ字でも数字でも良い</li>
  <li>$ は単数の冠詞と考えられる</li>
  <li>大文字と小文字は別物</li>
  <li>変数を使うには準備 (宣言など) が要らない</li>
  <li>スカラ変数には数字も文字列も入る</li>
</ul>

<h1>代入演算</h1>
<ul>
  <li>代入演算は <code>=</code> 記号を使う
    <pre>$var = 7;</pre>
  </li>
  <li>代入は右から左へ行う
    <pre><span style="color: #D20000; background-color: #FFFFFF">7 = $var; # wrong direction!</span></pre>
  </li>
  <li>代入は演算である、結果がある
    <pre>print 7+ ($var = 9);</pre>
    <p>は <code>$var</code> に 9 を代入して、 16
    を出力する。</p>
  </li>
</ul>

<h1>数学とプログラミングの違い</h1>
<ul>
  <li>数学に数は無限にあるが、Perl の場合は有限</li>
  <li>数学の変数は真に未定であるが、プログラムの変数は
    (たとえゴミであっても) 常に値を持つ</li>
  <li>数学の = は｢等しい」であるが、プログラムの =
    は代入である</li>
</ul>

<h1>摂氏から華氏への変換: 改造版</h1>
<ul>
  <li>改造前
    <pre># Celsius -&gt; Fahrenheit
print "Fahrenheit is: ", shift()*9/5 + 32, "\n";</pre>
  </li>
  <li>改造後:
    <pre># Celsius -&gt; Fahrenheit
$celsius = shift;
$fahrenheit = $celsius*9/5 + 32;
print $celsius, "degrees Celsius is ";
print $fahrenheit, "degrees Fahrenheit\n";</pre>
  </li>
</ul>

<h1>文字列の便利なところ</h1>
<ul>
  <li>二重引用符の文字列の中には変数を使える。変数の価に変換される。</li>
  <li>それが要らない時には一重引用符の文字列を使う。</li>
  <li>文字列は . 演算子でつなぐことができる。</li>
  <li>次の文は同じ:
    <pre>print $celsius, "degrees Celsius is ";
print $celsius . "degrees Celsius is ";
print "$celsius degrees Celsius is ";</pre>
  </li>
  <li>文字列も数字として使える:
    <pre>$fahrenheit = $celsius * "9"/"5" + <span style="color: #BD0000">"32degrees"</span>;</pre>
  </li>
</ul>

<h1>演習問題 (提出不要)</h1>
<ol>
  <li>BMI (body mass index) を計算するプログラムを作る
    <p>BMI は次のように定義されている:</p>
    <p>bmi = weight / height<sup>2</sup></p>
    <p>weight は kg 出の重量、height は m での身長</p>
    <p>BMI は 18.4 以下は細すぎ、18.5 – 24.9 は普通、25.0 –
    29.9 は重すぎ、30.0 以上は太りすぎ</p>
  </li>
  <li>他に面白い、役に立つ、興味のある計算をプログラムにする</li>
</ol>
</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>言語理論とコンパイラ</title>
  <meta name="generator" content="hand-written" />
  <link rel="stylesheet" href="examstyle.css" title="problems"/>
  <link rel="alternate stylesheet" href="answerstyle.css" title="solutions"/>

  <style>
    /* show stylesheet switch, to make sure people are aware
       of alternate stylesheet */
    @media screen {
      .stylesheet-switch { position: absolute; left: 0%; top: 0%;
                           font-size: 90%; color: blue;
                           background-color: skyblue; }
      .stylesheet-switch p { text-align: center; padding: 0 1em;
                             line-height: 110%; }
      .stylesheet-switch button { color: blue;
                                  background-color: skyblue; }
    }
    @media print { .stylesheet-switch { display: none; } }
  </style>
  <script type='text/javascript' src="/scripts/styleswitch.js"></script>

 </head>
<body>

<!--
<div class='note'>
<p>問題の番号などが見えるようには最新のブラウザ (例えば
<a href='http://www.opera.com/'>Opera</a>) が必要。
回答の一部は解答例で、場合によって他の正解もある。一部当初の問題と違うところがある。</p>
</div>
-->
<div class="pagehead first">
<h1>青山学院大学</h1>
<p class='pagenumber'>前期試験 ・ 2005 年 7 月 29 日 2 時限実施 ・ ページ </p>
<table><tbody>
    <tr class="h6">
      <td rowspan="2" class="w9">授業<br />科目</td>
      <td rowspan="2" class="writein w50">言語理論とコンパイラ</td>
      <td colspan="8">学生番号</td>
      <td>学科</td><td>学年</td><td>組</td><td>番</td>
      <td class="furigana">フリ<br />ガナ</td><td> </td><td>評点</td>
    </tr>
    <tr class="h3">
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w12"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w9"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w6">氏名</td>
      <td rowspan="2" class="w40"> </td><td rowspan="2" class="w12"> </td>
    </tr>
    <tr class="h9"><td>担当者</td><td class="writein">DÜRST, Martin J.</td></tr>
</tbody></table>
</div>

<!-- compiler stages -->
<div class='problem'>
<h2>コンパイラの主な処理 (5 点)</h2>
<p>コンパイラが行う主な五つの処理を順番通りに列挙しなさい。</p>
<ol>
<li><span class='solution'>字句解析</span></li>
<li><span class='solution'>構文解析</span></li>
<li><span class='solution'>意味解析</span></li>
<li><span class='solution'>コード生成</span></li>
<li><span class='solution'>最適化</span></li>
</ol>
</div>

<!-- Chomsky language hierarchy -->
<div class='problem'>
<h2>形式言語の表 (6 点)</h2>
<p>次の表の空白を埋めなさい。</p>
<table style='width: 90%'>
  <tbody>
    <tr>
      <th>文法</th>
      <th>Type</th>
      <th>言語</th>
      <th>オートマトン</th>
    </tr>
    <tr>
      <td>句構造文法</td>
      <td>0</td>
      <td class='solution'>句構造言語</td>
      <td>チューリング機械</td>
    </tr>
    <tr>
      <td class='solution'>文脈依存文法</td>
      <td>1</td>
      <td>文脈依存言語</td>
      <td>線形拘束オートマトン</td>
    </tr>
    <tr>
      <td>文脈自由文法</td>
      <td>2</td>
      <td>文脈自由言語</td>
      <td class='solution'>プッシュダウンオートマトン</td>
    </tr>
    <tr>
      <td class='solution'>正規文法</td>
      <td>3</td>
      <td class='solution'>正規言語</td>
      <td class='solution'>有限オートマトン</td>
    </tr>
  </tbody>
</table>
</div>

<!-- why separate lexical analysis and parsing -->
<div class='problem'>
<h2>字句解析と構文解析 (5 点)</h2>
<p>なぜコンパイラなどで字句解析と構文解析が分けられているかを簡単に説明しなさい。</p>
<p class='box solution'>字句解析は文字毎の処理なので効率が非常に大事。
正規表現・有限オートマトンで効率のよい実装ができる。構文解析には文脈自由言語が必要だが、
効率は少し落ちてもよい。全体に二つに分けると構造的にコンパイラが作れる。
(字句解析と構文解析は自然言語の単語の輸出と文の解析にも相当する。)</p>
</div>

<!-- regular expression creation -->
<div class='problem'>
<h2>正規表現の作成 (6 点)</h2>
<p>次の形式言語を受理する正規表現を作りなさい。使える記号は <code>|</code>, <code>*</code>,
<code> (</code>, <code> )</code> と <code>ε</code> である。</p>
<table>
<tr><th> </th><th>説明</th><th style='width: 31%'>正規表現</th></tr>
<tr><td>例</td><td>a が偶数個の語の集合</td><td>(aa)*</td></tr>
<tr><td class='subproblem'> </td><td>a が奇数個で b がゼロ個以上の語の集合</td>
    <td class='solution'>b*(ab*a)*b*</td></tr>
<tr><td class='subproblem'> </td><td>c の個数を 3 で割って余りが 0 か 2 の語の集合</td>
    <td class='solution'>(ccc)*(cc|ε)</td></tr>
<tr><td class='subproblem'> </td><td>g と h 両方がゼロ個以上の語の集合。但し、g が三つ以上連続しない。</td>
    <td class='solution'>h*((gg|g)hh*)*(gg|g|ε)</td></tr>
</table>
</div>

<div class="pagehead">
<h1>青山学院大学</h1>
<p class='pagenumber'>前期試験 ・ 2005 年 7 月 29 日 2 時限実施 ・ ページ </p>
<table><tbody>
    <tr class="h6">
      <td rowspan="2" class="w9">授業<br />科目</td>
      <td rowspan="2" class="writein w50">言語理論とコンパイラ</td>
      <td colspan="8">学生番号</td>
      <td>学科</td><td>学年</td><td>組</td><td>番</td>
      <td class="furigana">フリ<br />ガナ</td><td> </td><td>評点</td>
    </tr>
    <tr class="h3">
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w12"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w9"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w6">氏名</td>
      <td rowspan="2" class="w40"> </td><td rowspan="2" class="w12"> </td>
    </tr>
    <tr class="h9"><td>担当者</td><td class="writein">DÜRST, Martin J.</td></tr>
</tbody></table>
</div>

<!-- finite automaton -->
<div class='problem'>
<h2>有限オートマトン (合計 25点)</h2>
<!-- drawing -->
<p>次の遷移図で定義されている有限オートマトンがある。</p><img src='automaton1.png' />
<h3>(非決定性) 有限オートマトンの定義 (8 点)</h3>
<p>(非決定性) 有限オートマトンは次の 5字組で定義されている: &lt;<var>Q</var>, <var>Σ</var>,
</var>δ</var>, <var>q<sub>0</sub></var>, <var>F</var>&gt;。次の表にぞれそれの定義と上記の遷移図の
場合の値を記入しなさい。</p>
<table style='width: 70%'>
<tr><th>文字</th><th>定義</th><th>値</th></tr>
<tr><td><var>Q</var></td><td class='solution'>状態の有限集合</td><td class='solution'>{A, B, C, D}</td></tr>
<tr><td><var>Σ</var></td><td class='solution'>入力記号の有限集合</td><td class='solution'>{0, 1}</td></tr>
<tr><td></var>δ</var></td><td class='solution'>動作関数</td><td>(値は不要)
    <!-- <table style='width: 100%'>
       <caption>状態善意表</caption>
       <tbody>
       <tr><th></th><th>0</th><th>1</th></tr>
       <tr><td>A</td><td>{B, C}</td><td>{B, C}</td></tr>
       <tr><td>B</td><td>{D}</td><td>{}</td></tr>
       <tr><td>C</td><td>{D}</td><td>{}</td></tr>
       <tr><td>D</td><td>{}</td><td>{B, C}</td></tr>
       </tbody>
    </table>-->
</td></tr>
<tr><td><var>q<sub>0</sub></var></td><td class='solution'>初期状態</td><td class='solution'>A</td></tr>
<tr><td><var>F</var></td><td class='solution'>受理状態の有限集合</td><td class='solution'>{C, D}</td></tr>
</table>
<h3>DFA へ変換 (5 点)</h3>
<p>上記の図の NFA を DFA に変更し、そのオートマトンの遷移図を示しなさい。</h3>
<pre class='solution box'>

                             0
-> ( E ) --------> (( F )) -----> (( G ))
            1, 0      ^              |
                      |______________|
                             1
</pre>
<p>この問題は次ページに続く。</p>

<div class="pagehead">
<h1>青山学院大学</h1>
<p class='pagenumber'>前期試験 ・ 2005 年 7 月 29 日 2 時限実施 ・ ページ </p>
<table><tbody>
    <tr class="h6">
      <td rowspan="2" class="w9">授業<br />科目</td>
      <td rowspan="2" class="writein w50">言語理論とコンパイラ</td>
      <td colspan="8">学生番号</td>
      <td>学科</td><td>学年</td><td>組</td><td>番</td>
      <td class="furigana">フリ<br />ガナ</td><td> </td><td>評点</td>
    </tr>
    <tr class="h3">
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w12"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w9"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w6">氏名</td>
      <td rowspan="2" class="w40"> </td><td rowspan="2" class="w12"> </td>
    </tr>
    <tr class="h9"><td>担当者</td><td class="writein">DÜRST, Martin J.</td></tr>
</tbody></table>
</div>

<h3>有限オートマトンの簡単化 (4 点)</h3>
<p>前ページのオートマトンを簡単化しなさい。</p>
<pre class='solution box'>
          
    このオートマトンはそれ以上簡単化できません
         
                   
                   
</pre>
<h3>オートマトンから文法への変換 (4 点)</h3>
<p>前ページのオートマトンに相当する文法を作りなさい (NFA からでも DFA からでもよい)</p>
<pre class='solution'>
E -> 1                          E -> 0
E -> 1 F                        E -> 0 F
F -> 0 G                        F -> 0
G -> 1                          G -> 1 F
</pre>
<h3>以上のオートマトン・文法が受理する言語を言葉で説明しなさ合い (4 点)</h3>
<p class='solution'>1 や 0 一個の後に、0 を 前頭に 0 と 1 が交互に 0 記号以上来る。</p>
</div>

<!-- examples of strings conforming to regular expressions -->
<div class='problem'>
<h2>正規表現から語の出現 (6 点)</h2>
<p>次の表の正規表現に合う語を三つ例づつ記述しなさい。</p>
<table style='width: 50%'>
<tr><th>番号</th><th>正規表現</th><th>語 1</th><th>語 2</th><th>語 3</th></tr>
<tr><td>例</td><td>ab|c*</td><td>ab</td><td>ε</td><td>c</td></tr>
<tr><td class='subproblem'></td><td>abc*</td>
    <td class='solution'>ab</td>
    <td class='solution'>abc</td>
    <td class='solution'>abcc</td>
</tr>
<tr><td class='subproblem'></td><td>e(f|g|h)</td>
    <td class='solution'>ef</td>
    <td class='solution'>eg</td>
    <td class='solution'>eh</td>
</tr>
<tr><td class='subproblem'></td><td>e|(f|g)*</td>
    <td class='solution'>e</td>
    <td class='solution'>f</td>
    <td class='solution'>gf</td>
</tr>
</table>
</div>

<!-- error processing -->
<div class='problem'>
<h2>エラー処理 (6 点)</h2>
<p>コンパイラでの解析中のエラー処理は難しいとされている。よいエラー処理に要求されるものを三つ列挙しなさい。</p>
<p class='solution'>1. 分かりやすいエラーメッセージを出す;
2. 一つだけではなく、複数のエラーを見つける;
3. 二次エラーをできるだけ出さない<p>
  <!-- <li><span class='solution'>正しいプログラムの処理を遅くさせない</span></li>
  <li><span class='solution'><コンパイラを複雑しすぎない</span></li> -->
</div>

<div class="pagehead">
<h1>青山学院大学</h1>
<p class='pagenumber'>前期試験 ・ 2005 年 7 月 29 日 2 時限実施 ・ ページ </p>
<table><tbody>
    <tr class="h6">
      <td rowspan="2" class="w9">授業<br />科目</td>
      <td rowspan="2" class="writein w50">言語理論とコンパイラ</td>
      <td colspan="8">学生番号</td>
      <td>学科</td><td>学年</td><td>組</td><td>番</td>
      <td class="furigana">フリ<br />ガナ</td><td> </td><td>評点</td>
    </tr>
    <tr class="h3">
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w12"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w9"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w6">氏名</td>
      <td rowspan="2" class="w40"> </td><td rowspan="2" class="w12"> </td>
    </tr>
    <tr class="h9"><td>担当者</td><td class="writein">DÜRST, Martin J.</td></tr>
</tbody></table>
</div>

<!-- create some syntax rules -->
<div class='problem'>
<h2>簡単な文法を作る (<code>bison</code> 用) (合計 15 点)</h2>
<p>Perl プログラム言語には文字列の足し算と掛け算みたいなものがある。足し算の演算子は
"." (ドット) で、二つの文字列をつなぐ。掛け算の演算子は "x" で、左にある文字列
を右にある整数で繰り返すことになる。掛け算は足し算より優先で、結合は二つの演算とも左結合である。<br />
例:<code> ("aA" . "bB") x 2 . "c" x 3 </code>の値は<code> aAbBaAbBccc </code>である。</p>
<p>この簡単な文法を受理して、式の値を計算するプログラムを bison で段階的に作る。そのために使えるものは
次のとおりである。</p>
<p>次のトークンが定義されていて、字句解析で識別される: <code>DOT</code>: ドット、
<code>EKS</code>: "x"、
<code>STRING</code>: 文字列、
<code>INT</code>: 整数、
<code>OPENP</code>: 始め丸括弧
<code>CLOSEP</code>: 終わり丸括弧。</p>
<p>実装のために <code>string</code> のデータ型と <code>string concat(string, string);</code>
の二つの文字列をつなぐ関数と <code>int i;</code> の繰り返し用の変数が用意されている。(<code>bison</code> なので C
言語だが、文字列のメモリの用意は気にしなくてよい。)</p>
<h4>例: 二つの文字列だけを足し算だけで結ばれる入力を扱うものは以下のようになる。</h4>
<pre>expr  : term { printf ("Result is: %s\n", $1); } ;
term  : STRING DOT STRING { $$ = concat ($1, $2); } ;</pre>
<h3>足し算を二つ以上できるように文法を拡張しなさい (5 点)</h3>
<pre class='box solution'>expr  : term { printf ("Result is: %s\n", $1); } ;
term  : term DOT STRING { $$ = concat ($1, $2); } ;
      | STRING { $$ = $1; }
      ;</pre>
<h3>掛け算と括弧を追加し文法を完成しなさい (10 点)</h3>
<pre class='box solution'>expr  : term { printf ("Result is: %s\n", $1); } ;
term  : term DOT factor { $$ = concat ($1, $2); } ;
      | factor { $$ = $1; }
      ;
factor: factor EKS INT { $$ = ""; for (i=0; i<$3; i++)
                                      $$ = concat($$, $1); }
      | OPENP STRING CLOSEP { $$ = $2; }
      | STRING { $$ = $1; }
      ;</pre>
</div>

<div class="pagehead">
<h1>青山学院大学</h1>
<p class='pagenumber'>前期試験 ・ 2005 年 7 月 29 日 2 時限実施 ・ ページ </p>
<table><tbody>
    <tr class="h6">
      <td rowspan="2" class="w9">授業<br />科目</td>
      <td rowspan="2" class="writein w50">言語理論とコンパイラ</td>
      <td colspan="8">学生番号</td>
      <td>学科</td><td>学年</td><td>組</td><td>番</td>
      <td class="furigana">フリ<br />ガナ</td><td> </td><td>評点</td>
    </tr>
    <tr class="h3">
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w12"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w9"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w6">氏名</td>
      <td rowspan="2" class="w40"> </td><td rowspan="2" class="w12"> </td>
    </tr>
    <tr class="h9"><td>担当者</td><td class="writein">DÜRST, Martin J.</td></tr>
</tbody></table>
</div>

<!-- explain calc.output -->
<div class='problem'>
<h2><code>bison</code> の動作 (5 点)</h2>
<p>次に <code>bison -v</code> で作られている <code><var>file</var>.output</code> の
一部 (一つの状態についての情報) を示す。</p>
<pre class='box'>state 17

   21 addExpression: mulExpression .
   22 mulExpression: mulExpression . '*' unaryExpression
   23              | mulExpression . '/' unaryExpression
   24              | mulExpression . '%' unaryExpression

    '*'  shift, and go to state 34
    '/'  shift, and go to state 35
    '%'  shift, and go to state 36

    $default  reduce using rule 21 (addExpression)</pre>
<p>以上のファイルの一部を簡単に説明しなさい。</p>
<p class='box solution'>bison が作っている状態表の一つの状態の情報です。
分析の現在の現状は '.' で示されている。
mulExpression (因子) を認識したところで、次になにをするのかを決めるところです。
'*', '/' と '%' ではその演算子を shift して、それそれ 34, 35, 36 番の
状態に移る。それ以外のトーケンでしたら 21 番の文法規則を使って単独の
mulExpression を addExpression として認識する。</p>
</div>

<!-- code optimization -->
<div class='problem'>
<h2>コードの最適化の方法を五つ列挙しなさい (5 点)</h2>
<ol>
  <li><span class='solution'>静式評価 (constant folding, 定数たたみこみ)</span></li>
  <li><span class='solution'>定数伝播 (constant propagation)</span></li>
  <li><span class='solution'>無用命令の削除 (dead code elimination)</span></li>
  <li><span class='solution'>演算の変更</span></li>
  <li><span class='solution'>命令の順番変更</span></li>
  <!-- many others -->
<ol>
</div>

<div class="pagehead">
<h1>青山学院大学</h1>
<p class='pagenumber'>前期試験 ・ 2005 年 7 月 29 日 2 時限実施 ・ ページ </p>
<table><tbody>
    <tr class="h6">
      <td rowspan="2" class="w9">授業<br />科目</td>
      <td rowspan="2" class="writein w50">言語理論とコンパイラ</td>
      <td colspan="8">学生番号</td>
      <td>学科</td><td>学年</td><td>組</td><td>番</td>
      <td class="furigana">フリ<br />ガナ</td><td> </td><td>評点</td>
    </tr>
    <tr class="h3">
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w12"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w9"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w6">氏名</td>
      <td rowspan="2" class="w40"> </td><td rowspan="2" class="w12"> </td>
    </tr>
    <tr class="h9"><td>担当者</td><td class="writein">DÜRST, Martin J.</td></tr>
</tbody></table>
</div>

<!-- code generation and optimization -->
<div class='problem'>
<h2>コード生成と最適化 (合計 18点)</h2>
<p>次の機械命令を使って C のプログラムの部分のコードを生成しなさい。</p>
<pre>Command  Operand      Comment
LOAD     a, R1        変数 a の値をレジスタ R1 に代入 
STORE    R1, a        レジスタ R1 の値を変数 a に代入 
CONST    5, R1        レジスタ R1 に 5 と言う定数を代入
JUMP     label        無条件のジャンプ
JUMP&lt;    R1, label    レジスタ R1 が 0 より小さい時 label へジャンプ 
                            (同様に JUMP&lt;=, JUMP==, JUMP!=, JUMP&gt;= と 
                             JUMP&gt; がある。) 
ADD      R1, R2, R3   R1 と R2 を足して R3 に代入。同じレジスタ 
                            を何回使ってもよい。 
SUB      R1, R2, R3   ADD と同様の引き算 (R1 から R2 を引く)</pre>
<h4>コード生成の例</h4>
<table style="width: 100%"><tr><td>
<pre>
 if (a > 2)
 {    
     b = a;
 }
</pre></td><td>
<pre> Label   Command  Operand

         LOAD     a, R1
         CONST    2, R2
         SUB      R1, R2, R2</pre></td>
<td><pre> Label   Command  Operand

         JUMP&lt;=   R2, endif
         STORE    R1, b
 endif                      </pre></td></tr></table>
 
<h3><code>if - else</code> のコード生成 (9 点)</h3>
<p>左欄にある <code>C</code> のプログラム部分のコードを右の二欄に書きなさい。</p>
<table style="width: 100%"><tr><td>
<pre>
 if (a > 2
     && b > 2)
 {
         b = a;
 }
 else if (b < 0)
 {
         a = b;
 }
</pre></td><td>
<pre class='solution'>         LOAD     a, R1
         CONST    2, R2
         SUB      R1, R2, R2
         JUMP&lt;=   R2, else
         LOAD     b, R1
         CONST    2, R2
         SUB      R1, R2, R2
         JUMP&lt;=   R2, else
</pre></td>
 <td><pre class='solution'>
         LOAD     a, R1
         STORE    R1, b
         JUMP     endif
 else    LOAD     b, R1
         JUMP&gt;=   R1, endif
         LOAD     a, R1
         STORE    R1, b
 endif                     
</pre></td></tr></table>
<p>この問題は次ページに続く。</p>


<div class="pagehead">
<h1>青山学院大学</h1>
<p class='pagenumber'>前期試験 ・ 2005 年 7 月 29 日 2 時限実施 ・ ページ </p>
<table><tbody>
    <tr class="h6">
      <td rowspan="2" class="w9">授業<br />科目</td>
      <td rowspan="2" class="writein w50">言語理論とコンパイラ</td>
      <td colspan="8">学生番号</td>
      <td>学科</td><td>学年</td><td>組</td><td>番</td>
      <td class="furigana">フリ<br />ガナ</td><td> </td><td>評点</td>
    </tr>
    <tr class="h3">
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w3"> </td><td rowspan="2" class="w3"> </td>
      <td rowspan="2" class="w12"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w9"> </td><td rowspan="2" class="w9"> </td>
      <td rowspan="2" class="w6">氏名</td>
      <td rowspan="2" class="w40"> </td><td rowspan="2" class="w12"> </td>
    </tr>
    <tr class="h9"><td>担当者</td><td class="writein">DÜRST, Martin J.</td></tr>
</tbody></table>
</div>

<h3><code>for</code> 文の最適化 (9 点)</h3>
<p>次の非常に簡単な <code>for</code>
文の最適前のコードは表の左にある。このコードの最適化したものを表の右に書き込みなさい。
(ヒント: レジスタの数を増やし (例えば R1-R5)、有効に使う。繰り返し実行される命令は現在の 13個から
5個まで減らせる。繰り返しの外の命令は若干増えても大丈夫。)
 コメントは必要ない。<p>
<pre> for (i=0; i<100; i++)
     sum += i;</pre>
<table style="width: 100%"><tr><td>
<pre>
 Label   Command  Operand     Comment
         CONST    0, R1       i = 0
         STORE    R1, i
 next    LOAD     i, R2       i &lt; 100
         CONST    100, R3
         SUB      R2, R3, R3
         JUMP&gt;=   R3, endfor  i-100 &gt;= 0
         LOAD     sum, R1     sum += i;
         LOAD     i, R2
         ADD      R1, R2, R2
         STORE    R2, sum
         LOAD     i, R1       i++;
         CONST    1, R2
         ADD      R1, R2, R2
         STORE    R2, i
         JUMP     next        continue
 endfor                       after loop</pre></td><td>
<pre class='solution'>
 Label   Command  Operand     
         CONST    0, R1       
         LOAD     sum, R2    
         CONST    100, R3    
         CONST    1, R5
 label1  SUB      R1, R3, R4 
         JUMP&gt;=   R4, label2  
         ADD      R1, R2, R2 
         ADD      R1, R5, R1  
         JUMP     label1     
 label2  STORE    R2, sum    
         STORE    R1, i        </pre></td></tr></table>
</div>

<!-- give examples of formal languages -->
<div class='problem'>
<h2>形式言語の例 (8 点)</h2>
<p>次の言語の簡単な例をあげなさい。(ヒント: 決定可能と言うことは受理できる機械がつくれると言うこと)</p>
<dl>
  <dt class='subproblem'>正規言語</dt>
  <dd class='solution'>1 が二以上の後 0 が 0 以上続く語の集合</dd>
  <dt class='subproblem'>文脈自由言語であるが、正規言語ではない</dt>
  <dd class='solution'>b と c が同じ数でる語の集合</dd>
  <dt class='subproblem'>決定可能な形式言語であるが、文脈自由言語ではない</dt>
  <dd class='solution'>b が n この後 c が n 個、その後 d が n 個</dd>
  <dt class='subproblem'>形式言語であるが、決定可能ではない</dt>
  <dd class='solution'>将来の天気を表す語の集合</dd>
<dl>
</div>


<!-- table examples
<table>
<tr><th></th></tr>
<tr><td></td></tr>
</table>
--
<table>
<tr><th>番号</th><th></th></tr>
<tr><td>例</td><td></td></tr>
<tr><td class='subproblem'></td><td></td><td class='solution'></td></tr>
</table>
</div>

-->

</body>
</html>
